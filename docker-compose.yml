version: "3"
services:
  ncat:
    build:
      context: ncat 
      dockerfile: Dockerfile
    image: arturbrodzki/rso:ncat
    volumes:
      - "/root/ssl:/app/ssl"
    deploy:
      replicas: 2
      restart_policy:
        condition: on-failure
    ports:
      - "80:80"
  s_server:
    build:
      context: s_server 
      dockerfile: Dockerfile
    image: arturbrodzki/rso:s_server
    volumes:
      - "/root/ssl:/app/ssl"
    deploy:
      replicas: 2
      restart_policy:
        condition: on-failure
    ports:
      - "443:443"